<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>TouchWave v3.9 — QuantumShell PRIME</title>
<style>
    html,body{
        margin:0;overflow:hidden;
        background:#000;
        touch-action:none;
    }
    canvas{display:block;}
</style>
</head>
<body>
<canvas id="c"></canvas>

<script>
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");

let w,h;
function resize(){
    w=canvas.width=window.innerWidth;
    h=canvas.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

const particles=[];
const ripples=[];

// PRIME Particle Drift
for(let i=0;i<220;i++){
    particles.push({
        x:Math.random()*w,
        y:Math.random()*h,
        size:Math.random()*1.4+0.4,
        vx:(Math.random()-0.5)*0.18,
        vy:(Math.random()-0.5)*0.18
    });
}

function addRipple(x,y){
    ripples.push({
        x,y,
        t:0,
        max:Math.max(w,h)*1.0,
        speed:0.026,
        dir:(Math.random()*Math.PI*2)
    });
}

window.addEventListener("pointerdown",e=>{
    addRipple(e.clientX,e.clientY);
});

// 입자 필드
function drawParticles(){
    for(let p of particles){
        p.x+=p.vx;
        p.y+=p.vy;

        if(p.x<0)p.x=w;
        if(p.x>w)p.x=0;
        if(p.y<0)p.y=h;
        if(p.y>h)p.y=0;

        ctx.fillStyle="rgba(190,200,255,0.23)";
        ctx.fillRect(p.x,p.y,p.size,p.size);
    }
}

function draw(){
    ctx.clearRect(0,0,w,h);

    drawParticles();

    for(let r of ripples){
        r.t+=r.speed;

        const radius=r.t*r.max;
        const alpha=Math.max(0,1-r.t);
        const dx=Math.cos(r.dir)*radius*0.11;
        const dy=Math.sin(r.dir)*radius*0.11;

        const colors=[
            `rgba(255,255,255,${alpha*0.60})`,
            `rgba(170,210,255,${alpha*0.45})`,
            `rgba(130,170,255,${alpha*0.34})`,
            `rgba(90,120,255,${alpha*0.24})`,
            `rgba(60,80,180,${alpha*0.18})`
        ];

        // Shell Layer 1 — PRIME Outer
        ctx.beginPath();
        ctx.arc(r.x+dx, r.y+dy, radius*1.32, 0, Math.PI*2);
        ctx.strokeStyle=colors[4];
        ctx.lineWidth=radius*0.016;
        ctx.stroke();

        // Shell Layer 2
        ctx.beginPath();
        ctx.arc(r.x, r.y, radius*1.10, 0, Math.PI*2);
        ctx.strokeStyle=colors[3];
        ctx.lineWidth=radius*0.014;
        ctx.stroke();

        // Shell Layer 3
        ctx.beginPath();
        ctx.arc(r.x-dx*0.45, r.y-dy*0.45, radius*0.88, 0, Math.PI*2);
        ctx.strokeStyle=colors[2];
        ctx.lineWidth=radius*0.011;
        ctx.stroke();

        // Shell Layer 4
        ctx.beginPath();
        ctx.arc(r.x+dx*0.25, r.y+dy*0.25, radius*0.70, 0, Math.PI*2);
        ctx.strokeStyle=colors[1];
        ctx.lineWidth=radius*0.0085;
        ctx.stroke();

        // PRIME Core Pulse
        ctx.beginPath();
        ctx.arc(r.x, r.y, radius*0.52, 0, Math.PI*2);
        ctx.strokeStyle=colors[0];
        ctx.lineWidth=radius*0.006;
        ctx.stroke();
    }

    // 파동 제거
    for(let i=ripples.length-1;i>=0;i--){
        if(ripples[i].t>=1) ripples.splice(i,1);
    }

    requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>
