<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TouchWave v3.7 — QuantumShell+</title>
<style>
    html,body{
        margin:0;overflow:hidden;
        background:radial-gradient(circle at center,#101522,#000000);
        touch-action:none;
    }
    canvas{display:block;}
</style>
</head>
<body>
<canvas id="c"></canvas>

<script>
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");
let w,h;

function resize(){
    w=canvas.width=window.innerWidth;
    h=canvas.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

const ripples=[];

// 터치 시 생성되는 QuantumShell+
function addRipple(x,y){
    ripples.push({
        x,y,
        t:0,
        max:Math.max(w,h)*0.9,
        speed:0.030,
        dir:(Math.random()*Math.PI*2) // 방향성 부여
    });
}

window.addEventListener("pointerdown",e=>{
    addRipple(e.clientX,e.clientY);
});

// Quantum Noise 배경
function drawQuantumField(){
    let g=ctx.createRadialGradient(w/2,h/2,0,w/2,h/2,h*0.85);
    g.addColorStop(0,"rgba(200,220,255,0.10)");
    g.addColorStop(0.5,"rgba(140,160,255,0.06)");
    g.addColorStop(1,"rgba(60,80,140,0.03)");
    ctx.fillStyle=g;
    ctx.fillRect(0,0,w,h);
}

function draw(){
    ctx.clearRect(0,0,w,h);

    drawQuantumField();

    for(let r of ripples){
        r.t+=r.speed;

        const radius=r.t*r.max;
        const alpha=Math.max(0,1-r.t);

        // 방향성 offset
        const dx=Math.cos(r.dir)*radius*0.12;
        const dy=Math.sin(r.dir)*radius*0.12;

        // Layer 1 (가장 큰 쉘)
        ctx.beginPath();
        ctx.arc(r.x+dx,r.y+dy,radius*1.25,0,Math.PI*2);
        ctx.strokeStyle=`rgba(180,220,255,${alpha*0.22})`;
        ctx.lineWidth=radius*0.017;
        ctx.stroke();

        // Layer 2
        ctx.beginPath();
        ctx.arc(r.x,r.y,radius*1.0,0,Math.PI*2);
        ctx.strokeStyle=`rgba(120,180,255,${alpha*0.35})`;
        ctx.lineWidth=radius*0.013;
        ctx.stroke();

        // Layer 3
        ctx.beginPath();
        ctx.arc(r.x-dx*0.4,r.y-dy*0.4,radius*0.78,0,Math.PI*2);
        ctx.strokeStyle=`rgba(80,110,255,${alpha*0.45})`;
        ctx.lineWidth=radius*0.010;
        ctx.stroke();

        // Layer 4 (핵심 White Pulse)
        ctx.beginPath();
        ctx.arc(r.x,r.y,radius*0.55,0,Math.PI*2);
        ctx.strokeStyle=`rgba(255,255,255,${alpha*0.55})`;
        ctx.lineWidth=radius*0.006;
        ctx.stroke();
    }

    // 종료된 파동 제거
    for(let i=ripples.length-1;i>=0;i--){
        if(ripples[i].t>=1) ripples.splice(i,1);
    }

    requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>
