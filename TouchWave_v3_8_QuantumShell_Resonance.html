<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TouchWave v3.8 — QuantumShell Resonance Field</title>
<style>
    html,body{
        margin:0;overflow:hidden;
        background:#000;
        touch-action:none;
    }
    canvas{display:block;}
</style>
</head>
<body>
<canvas id="c"></canvas>

<script>
const canvas=document.getElementById("c");
const ctx=canvas.getContext("2d");
let w,h;

function resize(){
    w=canvas.width=window.innerWidth;
    h=canvas.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

const ripples=[];
const particles=[];

// 초기 배경 입자 생성
for(let i=0;i<180;i++){
    particles.push({
        x:Math.random()*w,
        y:Math.random()*h,
        size:Math.random()*1.6+0.3,
        vx:(Math.random()-0.5)*0.15,
        vy:(Math.random()-0.5)*0.15
    });
}

function addRipple(x,y){
    ripples.push({
        x,y,
        t:0,
        max:Math.max(w,h)*0.9,
        speed:0.028,
        dir:(Math.random()*Math.PI*2)
    });
}

window.addEventListener("pointerdown",e=>{
    addRipple(e.clientX,e.clientY);
});

// 배경 입자 움직임
function drawParticles(){
    for(let p of particles){
        p.x+=p.vx;
        p.y+=p.vy;

        if(p.x<0)p.x=w;
        if(p.x>w)p.x=0;
        if(p.y<0)p.y=h;
        if(p.y>h)p.y=0;

        ctx.fillStyle="rgba(160,180,255,0.20)";
        ctx.fillRect(p.x,p.y,p.size,p.size);
    }
}

function draw(){
    ctx.clearRect(0,0,w,h);

    drawParticles();

    for(let r of ripples){
        r.t+=r.speed;
        const radius=r.t*r.max;
        const alpha=Math.max(0,1-r.t);

        const dx=Math.cos(r.dir)*radius*0.10;
        const dy=Math.sin(r.dir)*radius*0.10;

        // 색상 단계
        const colors=[
            `rgba(255,255,255,${alpha*0.55})`,
            `rgba(150,220,255,${alpha*0.40})`,
            `rgba(120,180,255,${alpha*0.33})`,
            `rgba(80,130,255,${alpha*0.25})`,
            `rgba(200,200,255,${alpha*0.15})`,
        ];

        // Shell 1 (가장 큰)
        ctx.beginPath();
        ctx.arc(r.x+dx,r.y+dy,radius*1.25,0,Math.PI*2);
        ctx.strokeStyle=colors[1];
        ctx.lineWidth=radius*0.014;
        ctx.stroke();

        // Shell 2
        ctx.beginPath();
        ctx.arc(r.x,r.y,radius*1.0,0,Math.PI*2);
        ctx.strokeStyle=colors[2];
        ctx.lineWidth=radius*0.0115;
        ctx.stroke();

        // Shell 3
        ctx.beginPath();
        ctx.arc(r.x-dx*0.5,r.y-dy*0.5,radius*0.82,0,Math.PI*2);
        ctx.strokeStyle=colors[3];
        ctx.lineWidth=radius*0.009;
        ctx.stroke();

        // Core Pulse
        ctx.beginPath();
        ctx.arc(r.x,r.y,radius*0.60,0,Math.PI*2);
        ctx.strokeStyle=colors[0];
        ctx.lineWidth=radius*0.006;
        ctx.stroke();
    }

    // 완료된 파동 제거
    for(let i=ripples.length-1;i>=0;i--){
        if(ripples[i].t>=1) ripples.splice(i,1);
    }

    requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>
