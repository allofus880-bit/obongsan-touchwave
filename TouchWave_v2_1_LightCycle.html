<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TouchWave v2.1 â€” å…‰å¾ªç’° Color Shift Edition</title>
<style>
    html, body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: #000;
        touch-action: none;
    }
    canvas {
        display: block;
    }
</style>
</head>
<body>

<canvas id="touchCanvas"></canvas>

<script>
const canvas = document.getElementById("touchCanvas");
const ctx = canvas.getContext("2d");

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

// ðŸŒˆ ìƒ‰ìƒ ìˆœí™˜ê°’
let hue = 200;        // ì´ˆê¸° ì²­ìƒ‰ ê³„ì—´
let hueSpeed = 0.4;   // ìƒ‰ìƒ ë³€í™” ì†ë„

// ðŸŒŸ íŒŒë™ êµ¬ì¡°
let waves = [];

class Wave {
    constructor(x, y, baseHue) {
        this.x = x;
        this.y = y;
        this.radius = 0;
        this.alpha = 1;
        this.speed = 2.2;          
        this.fadeSpeed = 0.018;    
        this.baseHue = baseHue;    // ìƒì„± ë‹¹ì‹œì˜ ìƒ‰ìƒ ì €ìž¥
    }

    update() {
        this.radius += this.speed;
        this.alpha -= this.fadeSpeed;
    }

    draw() {
        ctx.beginPath();

        const g = ctx.createRadialGradient(
            this.x, this.y, 0,
            this.x, this.y, this.radius
        );

        const c1 = `hsla(${this.baseHue}, 80%, 65%, ${this.alpha})`;
        const c2 = `hsla(${this.baseHue}, 80%, 55%, ${this.alpha * 0.7})`;

        g.addColorStop(0, c1);
        g.addColorStop(0.5, c2);
        g.addColorStop(1, `rgba(0,0,0,0)`);

        ctx.fillStyle = g;
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fill();
    }
}

// í„°ì¹˜/í´ë¦­
function spawnWave(e) {
    let x, y;
    if (e.touches) {
        x = e.touches[0].clientX;
        y = e.touches[0].clientY;
    } else {
        x = e.clientX;
        y = e.clientY;
    }

    // í˜„ìž¬ ìƒ‰ìƒìœ¼ë¡œ íŒŒë™ ìƒì„±
    waves.push(new Wave(x, y, hue));
}

window.addEventListener("pointerdown", spawnWave);
window.addEventListener("touchstart", spawnWave);

function animate() {
    requestAnimationFrame(animate);

    // ë°°ê²½ ìžì—°ìŠ¤ëŸ¬ìš´ ìž”ê´‘ ì œê±°
    ctx.fillStyle = "rgba(0,0,0,0.18)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // ìƒ‰ìƒ ìˆœí™˜
    hue += hueSpeed;
    if (hue > 360) hue = 0;

    // íŒŒë™ ì—…ë°ì´íŠ¸ & ëžœë”ë§
    waves = waves.filter(w => w.alpha > 0);
    waves.forEach(w => {
        w.update();
        w.draw();
    });
}

animate();
</script>

</body>
</html>
